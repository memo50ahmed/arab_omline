<!DOCTYPE html>
<html lang="en">

    <head>
        <link rel="icon" href="{{ url_for('static', filename='img/logo.png') }}" type="image/x-icon">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/arti_main_style.css') }}">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
        <meta charset="UTF-8">
        <title>Chatbot</title>
        <style>
            #chatContainer {
                width: 600px;
                margin: 50px auto;
                background: #fff;
                border-radius: 10px;
                padding: 20px;
                box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            }

            #chatLog {
                max-height: 400px;
                overflow-y: auto;
                border: 1px solid #ccc;
                padding: 10px;
                margin-bottom: 10px;
            }

            .user-message {
                color: blue;
                margin: 5px 0;
            }

            .bot-message {
                color: green;
                margin: 5px 0;
            }

            #userInput {
                width: 80%;
                padding: 10px;
            }

            #sendButton {
                padding: 10px 20px;
            }

            iframe {
                width: 100%;
                height: 300px;
                border: none;
                margin-top: 10px;
            }



            .logo img {
                height: 65px;
                width: 60px;
                margin-bottom: 6px;
            }

            .nav {
                display: flex;
            }



 
            .hamburger {
                display: none;
                background: none;
                border: none;
                font-size: 1.8rem;
                cursor: pointer;
                color: #ffffff;
                z-index: 1100;
                transition: transform 0.3s ease;
            }

            .hamburger.open i {
                transform: rotate(90deg);
            }

            /* Responsive */
            @media (max-width: 768px) {
                .hamburger {
                    display: block;
                }

                .nav {
                    flex-direction: column;
                    position: absolute;
                    top: 100%;
                    left: 0;
                    right: 0;
                    background:  rgb(167, 96, 42);
                    overflow: hidden;
                    max-height: 0;
                    opacity: 0;
                    visibility: hidden;
                    transform: translateY(-10px);
                    transition: all 0.4s ease-in-out;
                }

                .nav.active {
                    max-height: 700px;
                    opacity: 1;
                    visibility: visible;
                    transform: translateY(0);
                }

                .nav-links {
                    flex-direction: column;
                    gap: 0;
                }

                .nav-links li {
                    padding: 1rem;
                    border-bottom: 1px solid #ddd;
                }

    }




            /* === ÿ≤ÿÆÿßÿ±ŸÅ ÿ™ÿ±ÿßÿ´Ÿäÿ© ÿπÿ±ÿ®Ÿäÿ© === */


            @keyframes bounceIn {
                0% {
                    opacity: 0;
                    transform: scale(0.5);
                }

                60% {
                    opacity: 1;
                    transform: scale(1.05);
                }

                100% {
                    transform: scale(1);
                }
            }

 

            .logo img {
                animation: bounceIn 1.2s ease-out forwards;
                width: 80px;
            }

            
        </style>

        </head>

        <body>
            <header>
            
                <h1 class="logo">
                    <a href="#"><img src="{{ url_for('static', filename='img/logo.png') }}" alt="Logo" /></a>
                </h1>
                <button class="hamburger" id="hamburger">
                    <i class="fas fa-bars"></i>
                </button>
                <nav class="nav" id="nav-menu">
                    <ul class="nav-links">
                        <li><a href="/info">Information</a></li>
                        <li><a href="/map">Interactive map</a></li>
            
                        <li><a href="/chatbot">Chatbot</a></li>
                        <li><a href="/#contact">Contact</a></li>
                    </ul>
                </nav>
            
            </header>
        

            <script>
                const hamburger = document.querySelector(".hamburger");
                const nav = document.querySelector(".nav");

                hamburger.addEventListener("click", () => {
                    nav.classList.toggle("active");
                    hamburger.classList.toggle("open");
                });
            </script>



            <div id="chatContainer">
                <h2>Chat with TravelBot ü§ñ</h2>
                <div id="chatLog">

                </div>
                <input type="text" id="userInput" placeholder="Type your question...">
                <button id="sendButton" onclick="sendMessage()">Send</button>
            </div>

            <script>
                function sendMessage() {
                    const userInput = document.getElementById("userInput").value;
                    if (!userInput.trim()) return;

                    // Show user message
                    const chatLog = document.getElementById("chatLog");
                    chatLog.innerHTML += `<p class="user-message">üë§ ${userInput}</p>`;

                    fetch("/chat", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify({ message: userInput })
                    })
                        .then(res => res.json())
                        .then(data => {
                            chatLog.innerHTML += `<p class="bot-message">ü§ñ ${data.response}</p>`;
                            if (data.iframe) {
                                chatLog.innerHTML += data.iframe;
                            }
                            document.getElementById("userInput").value = "";
                            chatLog.scrollTop = chatLog.scrollHeight;
                        })
                        .catch(err => {
                            chatLog.innerHTML += `<p class="bot-message">‚ö†Ô∏è Error: ${err}</p>`;
                        });
                }
            </script>

        </body>

</html>